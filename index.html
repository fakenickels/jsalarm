<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<title>jsalarm</title>
	<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css"/>
	<link rel="stylesheet" type="text/css" href="assets/css/main.css"/>
</head>
<body>

<div id='container' class='container'>
	<div class='holder'>
		<header>
			<h1 id='countdown'>Porque você era Bandida</h1>
			<form class='form-control form-inline' role='form' id='date-selection'>
				Soar às <input class='form-control' type='time'/>
				<button type='submit' class='btn btn-default'>ok</button>
			</form>

			<audio id='alarm'>
				<source src="assets/audio/alarm.mp3"></source>
			</audio>
		</header>
	</div>
</div>

<script type="text/javascript" src='assets/js/jquery-2.0.2.min.js'></script>
<script type="text/javascript" src='assets/js/bootstrap.min.js'></script>
<script type="text/javascript" src='assets/js/main.js'></script>
<script type="text/javascript">
	$("#date-selection").submit(function( e ){
		e.preventDefault();

		var time = $(this).find('input[type=time]').val().split(':'),
			untilDate = new Date();

		untilDate.setHours(time[0]);
		untilDate.setMinutes(time[1]);
		untilDate.setSeconds(0);

		Countdown.until( untilDate, function(obj){
			$('#countdown')
				.text('Faltam ' + obj.minutes + ' minutos' + ' e ' + obj.seconds );
		}, function(){
			$('#alarm')
				.attr('controls', 'true')
				.show()
				.get(0).play();
			$('#countdown').text('Acabou. Librèdade!');
		});
	});
</script>
</body>
</html>